(function(){"use strict";var t={6773:function(t,e,n){var a=n(9242),o=n(3396);const i={key:0},s={key:1};function l(t,e,n,a,l,r){const u=(0,o.up)("SettingsComponent"),c=(0,o.up)("HeaderComponent"),p=(0,o.up)("SliderComponent"),d=(0,o.up)("CardComponent"),m=(0,o.up)("TabulatorComponent");return l.showSettings?((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(u,{onCloseSettings:r.toggleSettings,onUpdatePlant:r.updatePlant,onUpdateName:r.updateName,plant:l.selectedPlant,potName:this.potData.name,profiles:l.profiles},null,8,["onCloseSettings","onUpdatePlant","onUpdateName","plant","potName","profiles"])])):l.potData&&l.activeProfile?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(c,{onOpenSettings:r.toggleSettings,title:l.activeProfile?l.activeProfile.name:"",type:"pageHeader"},null,8,["onOpenSettings","title"]),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{title:"Aktuelle Werte:",type:"cardHeader"}),(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.potData.sensors,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o.Wm)(p,{title:t.name,value:t.log[t.log.length-1],unit:t.unit,boundaries:l.activeProfile.boundaries[e]},null,8,["title","value","unit","boundaries"])])))),128))])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c,{title:"Statistik:",type:"cardHeader"}),(0,o.Wm)(m,{sensors:l.potData.sensors},null,8,["sensors"])])),_:1})])):(0,o.kq)("",!0)}var r=n(7139);function u(t,e,n,a,i,s){return(0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["header",{cardHeader:"cardHeader"===n.type}])},[(0,o._)("span",null,(0,r.zw)(n.title),1),"pageHeader"===n.type?((0,o.wg)(),(0,o.iD)("span",{key:0,class:"icon",onClick:e[0]||(e[0]=(...t)=>s.openSettings&&s.openSettings(...t))},"X")):(0,o.kq)("",!0)],2)}var c={name:"HeaderComponent",props:{title:String,type:String},methods:{openSettings(){this.$emit("openSettings")}}},p=n(89);const d=(0,p.Z)(c,[["render",u],["__scopeId","data-v-44f7b79b"]]);var m=d;const h={class:"card"};function f(t,e,n,a,i,s){return(0,o.wg)(),(0,o.iD)("div",h,[(0,o.WI)(t.$slots,"default",{},void 0,!0)])}var g={name:"CardComponent"};const v=(0,p.Z)(g,[["render",f],["__scopeId","data-v-3dd6b2b9"]]);var b=v;const _={class:"slider"};function w(t,e,n,a,i,s){return(0,o.wg)(),(0,o.iD)("div",_,[(0,o._)("span",null,(0,r.zw)(n.title)+": "+(0,r.zw)(n.value)+" "+(0,r.zw)(n.unit),1),(0,o._)("span",{class:(0,r.C_)(["indicator",s.checkBoundaries()?"statGood":"statWarning"])},null,2)])}var S={name:"SliderComponent",props:{title:String,value:String,unit:String,boundaries:Object},methods:{checkBoundaries(){return this.value<=this.boundaries.max&&this.value>=this.boundaries.min}}};const C=(0,p.Z)(S,[["render",w],["__scopeId","data-v-a3982c64"]]);var k=C;const D=t=>((0,o.dD)("data-v-18f2824c"),t=t(),(0,o.Cn)(),t),P={class:"tabulator"},y={class:"tabHeaders"},N=["onClick"],O={class:"tabContent"},T=D((()=>(0,o._)("br",null,null,-1)));function z(t,e,n,a,i,s){return(0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.sensors,(t=>((0,o.wg)(),(0,o.iD)("span",{key:t.id,onClick:e=>s.setActive(t.name),class:(0,r.C_)(["tabHeader",{activeHeader:t.name===i.isActive}])},(0,r.zw)(t.name),11,N)))),128))]),(0,o._)("div",O,[(0,o._)("p",null,[(0,o.Uk)((0,r.zw)(s.activeTab.name)+" in "+(0,r.zw)(s.activeTab.unit)+" ",1),T,(0,o.Uk)("Log: "+(0,r.zw)(s.activeTab.log),1)])])])}var H={name:"TabulatorComponent",props:{sensors:Array},data(){return{isActive:"Temperatur"}},methods:{setActive(t){this.isActive=t}},computed:{activeTab(){return Object.values(this.sensors).filter((t=>t.name===this.isActive))[0]}}};const j=(0,p.Z)(H,[["render",z],["__scopeId","data-v-18f2824c"]]);var U=j;const x=t=>((0,o.dD)("data-v-924cbd6c"),t=t(),(0,o.Cn)(),t),A=x((()=>(0,o._)("h1",null,"SETTINGS",-1))),W=x((()=>(0,o._)("span",null,"Blumentopfname:",-1))),B=x((()=>(0,o._)("h3",null,"Profiles:",-1))),I=x((()=>(0,o._)("tr",null,[(0,o._)("th",{rowspan:"2"},"Name"),(0,o._)("th",{colspan:"2"},"Temperatur"),(0,o._)("th",{colspan:"2"},"Licht"),(0,o._)("th",{colspan:"2"},"Bodenfeuchtigkeit"),(0,o._)("th",{rowspan:"2"},"Auswahl")],-1))),Z=x((()=>(0,o._)("tr",null,[(0,o._)("th",null,"min"),(0,o._)("th",null,"max"),(0,o._)("th",null,"min"),(0,o._)("th",null,"max"),(0,o._)("th",null,"min"),(0,o._)("th",null,"max")],-1))),J=["onClick"];function $(t,e,n,i,s,l){return(0,o.wg)(),(0,o.iD)("div",{class:"settings",onClick:e[2]||(e[2]=(0,a.iM)(((...t)=>l.closeSettings&&l.closeSettings(...t)),["self"]))},[A,(0,o._)("p",null,[W,(0,o.wy)((0,o._)("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>s.newName=t)},null,512),[[a.nr,s.newName]]),(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>l.updateName&&l.updateName(...t))},"Namen übernehmen")]),(0,o._)("div",null,[B,(0,o._)("table",null,[I,Z,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.profiles,((t,e)=>((0,o.wg)(),(0,o.iD)("tr",{key:e,class:(0,r.C_)(t.name===n.plant?"active":"")},[(0,o._)("td",null,(0,r.zw)(t.name),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.temperature.min),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.temperature.max),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.light.min),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.light.max),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.moisture.min),1),(0,o._)("td",null,(0,r.zw)(t.boundaries.moisture.max),1),(0,o._)("td",null,[(0,o._)("button",{onClick:t=>l.updatePlant(e)},"Profil auswählen",8,J)])],2)))),128))])])])}var K={name:"SettingsComponent",props:{plant:String,potName:String,profiles:Object},data(){return{selectedPlant:this.plant?this.plant:"",newName:this.potName?this.potName:""}},methods:{closeSettings(){this.$emit("closeSettings")},updatePlant(t){this.$emit("updatePlant",t)},updateName(){this.$emit("updateName",this.newName)}}};const Y=(0,p.Z)(K,[["render",$],["__scopeId","data-v-924cbd6c"]]);var q=Y,E={name:"App",components:{HeaderComponent:m,CardComponent:b,SliderComponent:k,TabulatorComponent:U,SettingsComponent:q},data(){return{showSettings:!1,profiles:null,potData:null,selectedPlant:null,activeProfile:null,dbUrl:"https://cloudleo.duckdns.org/Blumentopf/Database/db.json",potUrl:"https://cloudleo.duckdns.org/Blumentopf/Database/prototyp.json",apiUrl:"https://cloudleo.duckdns.org/Blumentopf/Database/api.php"}},methods:{toggleSettings(){this.showSettings=!this.showSettings},updatePlant(t){this.selectedPlant=t,this.setActiveProfile(),this.potData.profile=this.selectedPlant,this.writeToJson(this.potData)},updateName(t){this.potData.name=t,this.writeToJson(this.potData)},writeToJson(t){console.log("Updating Json..."),t=JSON.stringify(t),fetch(this.apiUrl,{method:"POST",body:t}).then((t=>t.json())).then((t=>console.log(t.message))).catch((t=>console.log(t.message)))},setProfiles(){fetch(this.dbUrl).then((t=>t.json())).then((t=>{this.profiles=t,this.setActiveProfile()})).catch((t=>console.log(t.message)))},setActiveProfile(){this.activeProfile=this.profiles[this.selectedPlant]}},mounted(){fetch(this.potUrl).then((t=>t.json())).then((t=>{this.potData=t,this.selectedPlant=this.potData.profile,this.setProfiles()})).catch((t=>console.log(t.message)))}};const G=(0,p.Z)(E,[["render",l]]);var L=G;(0,a.ri)(L).mount("#app")}},e={};function n(a){var o=e[a];if(void 0!==o)return o.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,n),i.exports}n.m=t,function(){var t=[];n.O=function(e,a,o,i){if(!a){var s=1/0;for(c=0;c<t.length;c++){a=t[c][0],o=t[c][1],i=t[c][2];for(var l=!0,r=0;r<a.length;r++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](a[r])}))?a.splice(r--,1):(l=!1,i<s&&(s=i));if(l){t.splice(c--,1);var u=o();void 0!==u&&(e=u)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[a,o,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,a){var o,i,s=a[0],l=a[1],r=a[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(r)var c=r(n)}for(e&&e(a);u<s.length;u++)i=s[u],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(c)},a=self["webpackChunkprg_blumentopf"]=self["webpackChunkprg_blumentopf"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(6773)}));a=n.O(a)})();
//# sourceMappingURL=app.c50b4757.js.map